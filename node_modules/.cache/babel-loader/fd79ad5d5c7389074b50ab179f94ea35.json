{"ast":null,"code":"import _toConsumableArray from\"/Users/konstantine/Desktop/My Page/Sass/my_music_website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/konstantine/Desktop/My Page/Sass/my_music_website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/konstantine/Desktop/My Page/Sass/my_music_website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/konstantine/Desktop/My Page/Sass/my_music_website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/konstantine/Desktop/My Page/Sass/my_music_website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Track from'./Track';import songs from'../songs';var MusicSection=/*#__PURE__*/function(_React$Component){_inherits(MusicSection,_React$Component);var _super=_createSuper(MusicSection);function MusicSection(){var _this;_classCallCheck(this,MusicSection);_this=_super.call(this);_this.handleSetSrc=function(id){return function(){_this.setState({src:songs[id].src,currentTrackNumber:id},function(){//when done setting state do this\nif(_this.player.current.paused){if(_this.state.currentTime[id]){//if current time was set. otherwise start from 0\n_this.player.current.currentTime=_this.state.currentTime[id];//start from where stopped last time\n}_this.player.current.play();_this.setState({paused:false,ended:_this.player.current.ended});}else{_this.player.current.pause();_this.setState({paused:true});}});};};_this.handleTimeUpdate=function(event){var index=_this.state.currentTrackNumber;var updatedCurrentTime=_toConsumableArray(_this.state.currentTime);updatedCurrentTime[index]=event.target.currentTime;//update single value in array\n_this.setState({currentTime:updatedCurrentTime});};_this.handleDurationChange=function(){var updatedDuartion=_toConsumableArray(_this.state.duration);updatedDuartion[_this.state.currentTrackNumber]=_this.player.current.duration;_this.setState({duration:updatedDuartion});};_this.handleScrubberClick=function(amount){try{_this.player.current.currentTime=amount;}catch(_unused){console.log(\"give it a second...\");}};_this.handleEnded=function(){var index=_this.state.currentTrackNumber;var updatedCurrentTime=_toConsumableArray(_this.state.currentTime);updatedCurrentTime[index]=0;_this.setState({ended:_this.player.current.ended,paused:true,currentTime:updatedCurrentTime});};_this.state={src:\"\",paused:true,duration:[],currentTrackNumber:\"\",currentTime:[]};_this.player=React.createRef();return _this;}_createClass(MusicSection,[{key:\"render\",value:function render(){var _this2=this;var list=songs.map(function(item,index){return/*#__PURE__*/React.createElement(Track,{ended:_this2.state.ended,currentTime:_this2.state.currentTime[index],currentTrackNumber:_this2.state.currentTrackNumber,paused:_this2.state.paused,duration:_this2.state.duration[index],title:songs[index].name,key:index,id:index,setSrc:_this2.handleSetSrc,scrubberClick:_this2.handleScrubberClick});});return/*#__PURE__*/React.createElement(\"div\",{className:\"tracks\"},/*#__PURE__*/React.createElement(\"audio\",{ref:this.player,src:this.state.src,onTimeUpdate:this.handleTimeUpdate,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded}),list);}}]);return MusicSection;}(React.Component);export default MusicSection;","map":{"version":3,"sources":["/Users/konstantine/Desktop/My Page/Sass/my_music_website/src/components/MusicSection.js"],"names":["React","Track","songs","MusicSection","handleSetSrc","id","setState","src","currentTrackNumber","player","current","paused","state","currentTime","play","ended","pause","handleTimeUpdate","event","index","updatedCurrentTime","target","handleDurationChange","updatedDuartion","duration","handleScrubberClick","amount","console","log","handleEnded","createRef","list","map","item","name","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Track from './Track'\nimport songs from '../songs'\n\nclass MusicSection extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      src: \"\",\n      paused: true,\n      duration: [],\n      currentTrackNumber: \"\",\n      currentTime: [],\n    }\n\n    this.player = React.createRef()\n  }\n\n\n  handleSetSrc = (id) => {\n    return () => {\n      this.setState({\n        src: songs[id].src,\n        currentTrackNumber: id,\n      }, () => { //when done setting state do this\n        if (this.player.current.paused) {\n          if (this.state.currentTime[id]) { //if current time was set. otherwise start from 0\n            this.player.current.currentTime = this.state.currentTime[id] //start from where stopped last time\n          }\n          this.player.current.play()\n          this.setState({\n            paused: false,\n            ended: this.player.current.ended\n          })\n        } else {\n          this.player.current.pause()\n          this.setState({\n            paused: true,\n          })\n        }\n      }) \n    }\n  } \n\n  handleTimeUpdate = (event) => {\n    let index = this.state.currentTrackNumber\n    let updatedCurrentTime = [...this.state.currentTime]\n    updatedCurrentTime[index] = event.target.currentTime //update single value in array\n    this.setState({\n      currentTime: updatedCurrentTime\n    })\n  }\n\n  handleDurationChange = () => {\n    let updatedDuartion = [...this.state.duration]\n    updatedDuartion[this.state.currentTrackNumber] = this.player.current.duration\n    this.setState({\n      duration: updatedDuartion\n    })\n  }\n\n  handleScrubberClick = (amount) => {\n    try {\n      this.player.current.currentTime = amount\n    } catch {\n      console.log(\"give it a second...\")\n    }\n  }\n\n  handleEnded = () => {\n    let index = this.state.currentTrackNumber\n    let updatedCurrentTime = [...this.state.currentTime]\n    updatedCurrentTime[index] = 0\n    this.setState({\n      ended: this.player.current.ended,\n      paused: true,\n      currentTime: updatedCurrentTime\n    })\n  }\n\n  render() {\n    const list = songs.map((item, index) => {\n      return(\n        <Track \n          ended={this.state.ended}\n          currentTime={this.state.currentTime[index]}\n          currentTrackNumber={this.state.currentTrackNumber}\n          paused={this.state.paused}\n          duration={this.state.duration[index]}\n          title={songs[index].name}\n          key={index}\n          id={index}\n          setSrc={this.handleSetSrc}\n          scrubberClick={this.handleScrubberClick}\n        />\n      )\n    })\n    return(\n      <div className=\"tracks\" >\n        <audio \n          ref={this.player}\n          src={this.state.src}\n          onTimeUpdate={this.handleTimeUpdate}\n          onDurationChange={this.handleDurationChange}\n          onEnded={this.handleEnded}\n        />\n        \n        {list}\n        \n      </div>\n    )\n  }\n}\n\nexport default MusicSection\n"]},"metadata":{},"sourceType":"module"}